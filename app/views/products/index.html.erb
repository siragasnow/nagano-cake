<div class="container">
  <div class="row">
    <div class="col-xs-2">
      <table class="table table-bordered table-hover">
        <tr>
          <h4>ジャンル検索</h4>
        </tr>
        <% @genres.each do |genre| %>
        <tr>
          <td>
            <%= link_to genre.name, products_path(genre_id: genre.id) %>
          </td>
        </tr>
        <% end %>
      </table>
    </div>

    <% if @q_products %>
      <%# 検索の場合 %>
      <div class="col-xs-9 col-xs-offset-1 product-card-content">
        <% if @q_products.empty? %>
          <h3>条件に合う商品が見つかりませんでした</h3>
        <% else %>
          <h3>(全<strong><%= @q_products.count %></strong>件)の商品がヒットしました</h3>
        <% end %>

        <%= render 'product_list', products: @q_products %>

        <div class="row text-center">
          <%= paginate @q_products, class: "paginate" %>
        </div>
      </div>
      
    <% else %>
      <%# 商品一覧表示（ジャンル絞り込み）の場合 %>
      <div class="col-xs-9 col-xs-offset-1 product-card-content">
        <% if @products_of_genre.present? %>
          <h2><%= @products_of_genre.first.genre.name %></h2>
          <p><%= "(全#{@products_of_genre.count}件)" %></p>
        <% else %>
          <h2>現在お取り扱いがありません</h2>
        <% end %>

        <%= render 'product_list', products: @products_of_genre %>

        <div class="row text-center">
          <%= paginate @products_of_genre, class: "paginate" %>
        </div>
    <% end %>

    
  </div>
</div>
